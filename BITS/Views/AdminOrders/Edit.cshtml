@model BITS.Models.Order

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<partial name="_Edit" />

<style>
    .col-auto {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .img-container {
        width: 200px;
        height: 170px;
    }

        .img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 10px;
        }

    .cart-product {
        margin-top: 1em;
        margin-bottom: 2em;
        padding: 1em;
        background-color: #323232;
        border-radius: 10px;
        z-index: 1;
    }

    .cart-product-type {
        padding: 3px 12px;
        border-radius: 6px;
        background-color: #5E5E5E;
        font-weight: bold;
        display: inline-block;
    }

    .cart-product-name {
        font-size: 1.5em;
        font-weight: bold;
    }

    .cart-product-refund-type {
        font-size: 1em;
    }

    .cart-product-rate {
        padding: 3px 12px;
        border-radius: 6px;
        background-color: #1277D9;
        margin-right: 1em;
        font-weight: bold;
    }

    .delete-button {
        padding: 5px;
    }

    .summary {
        font-size: 2.25em;
        font-weight: bold;
    }

    .right-index {
        font-size: 1.5em;
        opacity: 60%;
        font-weight: bold;
    }

    .right {
        padding: 0px 3em;
    }

    .right-value {
        font-size: 1.5em;
        font-weight: bold;
    }

    .checkout-button {
        box-sizing: border-box;
        display: block;
        width: calc(100%);
        border-radius: 7px;
        border: none;
        padding: 10px;
        color: white;
        text-align: center;
        font-size: 1.5em;
        margin-top: 2em;
        margin-bottom: 2em;
        background-color: #1277D9;
    }
</style>

<div class="edit container-fluid">
    <div class="row">
        <div class="col">
            <form asp-action="Edit">

                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <div class="row justify-content-between align-items-center">
                    <button onclick="parent.closeIFrame();">
                        <partial name="/Views/Shared/Icons/close.cshtml" />
                    </button>
                    <div class="row">
                        <a asp-action="Delete" asp-route-id="@Model.OrderId" id="delete-button" class="mr-3">
                            Delete
                        </a>
                        <input type="reset" value="Reset" id="cancel-button" class="mr-3" />
                        <input type="submit" value="Save" id="save-button" />
                    </div>

                </div>

                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <input type="hidden" asp-for="OrderId" />

                <div class="form-group">
                    <label asp-for="UserId" class="control-label"></label>
                    <input asp-for="UserId" class="form-control" readonly/>
                    <span asp-validation-for="UserId" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="OrderId" class="control-label"></label>
                    <input asp-for="OrderId" class="form-control" readonly />
                    <span asp-validation-for="OrderId" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="OriginalPrice" class="control-label"></label>
                    <input asp-for="OriginalPrice" class="form-control" />
                    <span asp-validation-for="OriginalPrice" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Subtotal" class="control-label"></label>
                    <input asp-for="Subtotal" class="form-control" />
                    <span asp-validation-for="Subtotal" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="DiscountPrice" class="control-label"></label>
                    <input asp-for="DiscountPrice" class="form-control" />
                    <span asp-validation-for="DiscountPrice" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="StreetAddress" class="control-label"></label>
                    <input asp-for="StreetAddress" class="form-control" />
                    <span asp-validation-for="StreetAddress" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="PostCode" class="control-label"></label>
                    <input asp-for="PostCode" class="form-control" />
                    <span asp-validation-for="PostCode" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Suburb" class="control-label"></label>
                    <input asp-for="Suburb" class="form-control" />
                    <span asp-validation-for="Suburb" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="State" class="control-label"></label>
                    <input asp-for="State" class="form-control" />
                    <span asp-validation-for="State" class="text-danger"></span>
                </div>

            </form>

            <div class="row justify-content-between align-items-center">
                <p>Products In Order</p>
            </div>

        @{
            foreach (var item in ViewBag.ProductList)
            {
                <div class="row cart-product">
                    <div class="col-auto">
                        <div class="img-container">
                            <img src="@(item.Product.PreviewImages.Count > 0 ? item.Product.PreviewImages[0] : "")" />
                        </div>
                    </div>
                    <div class="col">
                        
                        <div class="row justify-content-between align-items-center">
                            <div class="cart-product-type">@item.Product.ProductType</div>
                            <div class="d-flex">
                                <a asp-controller="ProductsInOrders" asp-action="Edit" asp-route-id="@item.ProductsInOrders.ProductsInOrdersId">
                                    <partial name="/Views/Shared/Icons/edit.cshtml" />
                                </a>
                                <form asp-controller="ProductsInOrders" asp-action="Delete" asp-route-id="@item.ProductsInOrders.ProductsInOrdersId">
                                    <input type="hidden" name="productId" value="@item.ProductsInOrders.ProductsInOrdersId" />
                                    <button type="submit" class="bg-transparent border-0">
                                        <partial name="/Views/Shared/Icons/delete.cshtml" />
                                    </button>
                                </form>
                            </div>
                        </div>

                        <div class="row cart-product-name">@item.Product.Name</div>
                        <div class="row justify-content-between align-items-stretch cart-product-actual-price">
                            <div>Purchased Quantity: </div>
                            <div>x @item.Quantity</div>
                        </div>
                        <div class="row justify-content-between align-items-stretch cart-product-actual-price">
                            <div>Original Price: </div>
                            <div>$ @item.Product.Price</div>
                        </div>

                    </div>
                </div>

            }
        }

        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}